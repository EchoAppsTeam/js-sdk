<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* ============================================================
 * bootstrap-dropdown.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */


!function ($) {

  &quot;use strict&quot;; // jshint ;_;


 /* DROPDOWN CLASS DEFINITION
  * ========================= */

  var toggle = &#39;[data-toggle=dropdown]&#39;
    , Dropdown = function (element) {
        var $el = $(element).on(&#39;click.dropdown.data-api&#39;, this.toggle)
        $(&#39;html&#39;).on(&#39;click.dropdown.data-api&#39;, function () {
          $el.parent().removeClass(&#39;open&#39;)
        })
      }

  Dropdown.prototype = {

    constructor: Dropdown

  , toggle: function (e) {
      var $this = $(this)
        , $parent
        , isActive

      if ($this.is(&#39;.disabled, :disabled&#39;)) return

      $parent = getParent($this)

      isActive = $parent.hasClass(&#39;open&#39;)

      clearMenus()

      if (!isActive) {
        if (&#39;ontouchstart&#39; in document.documentElement) {
          // if mobile we we use a backdrop because click events don&#39;t delegate
          $(&#39;&lt;div class=&quot;dropdown-backdrop&quot;/&gt;&#39;).insertBefore($(this)).on(&#39;click&#39;, clearMenus)
        }
        $parent.toggleClass(&#39;open&#39;)
      }

      $this.focus()

      return false
    }

  , keydown: function (e) {
      var $this
        , $items
        , $active
        , $parent
        , isActive
        , index

      if (!/(38|40|27)/.test(e.keyCode)) return

      $this = $(this)

      e.preventDefault()
      e.stopPropagation()

      if ($this.is(&#39;.disabled, :disabled&#39;)) return

      $parent = getParent($this)

      isActive = $parent.hasClass(&#39;open&#39;)

      if (!isActive || (isActive &amp;&amp; e.keyCode == 27)) {
        if (e.which == 27) $parent.find(toggle).focus()
        return $this.click()
      }

      $items = $(&#39;[role=menu] li:not(.divider):visible a&#39;, $parent)

      if (!$items.length) return

      index = $items.index($items.filter(&#39;:focus&#39;))

      if (e.keyCode == 38 &amp;&amp; index &gt; 0) index--                                        // up
      if (e.keyCode == 40 &amp;&amp; index &lt; $items.length - 1) index++                        // down
      if (!~index) index = 0

      $items
        .eq(index)
        .focus()
    }

  }

  function clearMenus() {
    $(&#39;.dropdown-backdrop&#39;).remove()
    $(toggle).each(function () {
      getParent($(this)).removeClass(&#39;open&#39;)
    })
  }

  function getParent($this) {
    var selector = $this.attr(&#39;data-target&#39;)
      , $parent

    if (!selector) {
      selector = $this.attr(&#39;href&#39;)
      selector = selector &amp;&amp; /#/.test(selector) &amp;&amp; selector.replace(/.*(?=#[^\s]*$)/, &#39;&#39;) //strip for ie7
    }

    $parent = selector &amp;&amp; $(selector)

    if (!$parent || !$parent.length) $parent = $this.parent()

    return $parent
  }


  /* DROPDOWN PLUGIN DEFINITION
   * ========================== */

  var old = $.fn.dropdown

  $.fn.dropdown = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data(&#39;dropdown&#39;)
      if (!data) $this.data(&#39;dropdown&#39;, (data = new Dropdown(this)))
      if (typeof option == &#39;string&#39;) data[option].call($this)
    })
  }

  $.fn.dropdown.Constructor = Dropdown


 /* DROPDOWN NO CONFLICT
  * ==================== */

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  /* APPLY TO STANDARD DROPDOWN ELEMENTS
   * =================================== */

  $(document)
    .on(&#39;click.dropdown.data-api&#39;, clearMenus)
    .on(&#39;click.dropdown.data-api&#39;, &#39;.dropdown form&#39;, function (e) { e.stopPropagation() })
    .on(&#39;click.dropdown.data-api&#39;  , toggle, Dropdown.prototype.toggle)
    .on(&#39;keydown.dropdown.data-api&#39;, toggle + &#39;, [role=menu]&#39; , Dropdown.prototype.keydown)

}(window.jQuery);
</pre>
</body>
</html>
