<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* =========================================================
 * bootstrap-modal.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */


!function ($) {

  &quot;use strict&quot;; // jshint ;_;


 /* MODAL CLASS DEFINITION
  * ====================== */

  var Modal = function (element, options) {
    this.options = options
    this.$element = $(element)
      .delegate(&#39;[data-dismiss=&quot;modal&quot;]&#39;, &#39;click.dismiss.modal&#39;, $.proxy(this.hide, this))
    this.options.remote &amp;&amp; this.$element.find(&#39;.modal-body&#39;).load(this.options.remote)
  }

  Modal.prototype = {

      constructor: Modal

    , toggle: function () {
        return this[!this.isShown ? &#39;show&#39; : &#39;hide&#39;]()
      }

    , show: function () {
        var that = this
          , e = $.Event(&#39;show&#39;)

        this.$element.trigger(e)

        if (this.isShown || e.isDefaultPrevented()) return

        this.isShown = true

        this.escape()

        this.backdrop(function () {
          var transition = $.support.transition &amp;&amp; that.$element.hasClass(&#39;fade&#39;)

          if (!that.$element.parent().length) {
            that.$element.appendTo(document.body) //don&#39;t move modals dom position
          }

          that.$element.show()

          if (transition) {
            that.$element[0].offsetWidth // force reflow
          }

          that.$element
            .addClass(&#39;in&#39;)
            .attr(&#39;aria-hidden&#39;, false)

          that.enforceFocus()

          transition ?
            that.$element.one($.support.transition.end, function () { that.$element.focus().trigger(&#39;shown&#39;) }) :
            that.$element.focus().trigger(&#39;shown&#39;)

        })
      }

    , hide: function (e) {
        e &amp;&amp; e.preventDefault()

        var that = this

        e = $.Event(&#39;hide&#39;)

        this.$element.trigger(e)

        if (!this.isShown || e.isDefaultPrevented()) return

        this.isShown = false

        this.escape()

        $(document).off(&#39;focusin.modal&#39;)

        this.$element
          .removeClass(&#39;in&#39;)
          .attr(&#39;aria-hidden&#39;, true)

        $.support.transition &amp;&amp; this.$element.hasClass(&#39;fade&#39;) ?
          this.hideWithTransition() :
          this.hideModal()
      }

    , enforceFocus: function () {
        var that = this
        $(document).on(&#39;focusin.modal&#39;, function (e) {
          if (that.$element[0] !== e.target &amp;&amp; !that.$element.has(e.target).length) {
            that.$element.focus()
          }
        })
      }

    , escape: function () {
        var that = this
        if (this.isShown &amp;&amp; this.options.keyboard) {
          this.$element.on(&#39;keyup.dismiss.modal&#39;, function ( e ) {
            e.which == 27 &amp;&amp; that.hide()
          })
        } else if (!this.isShown) {
          this.$element.off(&#39;keyup.dismiss.modal&#39;)
        }
      }

    , hideWithTransition: function () {
        var that = this
          , timeout = setTimeout(function () {
              that.$element.off($.support.transition.end)
              that.hideModal()
            }, 500)

        this.$element.one($.support.transition.end, function () {
          clearTimeout(timeout)
          that.hideModal()
        })
      }

    , hideModal: function () {
        var that = this
        this.$element.hide()
        this.backdrop(function () {
          that.removeBackdrop()
          that.$element.trigger(&#39;hidden&#39;)
        })
      }

    , removeBackdrop: function () {
        this.$backdrop &amp;&amp; this.$backdrop.remove()
        this.$backdrop = null
      }

    , backdrop: function (callback) {
        var that = this
          , animate = this.$element.hasClass(&#39;fade&#39;) ? &#39;fade&#39; : &#39;&#39;

        if (this.isShown &amp;&amp; this.options.backdrop) {
          var doAnimate = $.support.transition &amp;&amp; animate

          this.$backdrop = $(&#39;&lt;div class=&quot;modal-backdrop &#39; + animate + &#39;&quot; /&gt;&#39;)
            .appendTo(document.body)

          this.$backdrop.click(
            this.options.backdrop == &#39;static&#39; ?
              $.proxy(this.$element[0].focus, this.$element[0])
            : $.proxy(this.hide, this)
          )

          if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

          this.$backdrop.addClass(&#39;in&#39;)

          if (!callback) return

          doAnimate ?
            this.$backdrop.one($.support.transition.end, callback) :
            callback()

        } else if (!this.isShown &amp;&amp; this.$backdrop) {
          this.$backdrop.removeClass(&#39;in&#39;)

          $.support.transition &amp;&amp; this.$element.hasClass(&#39;fade&#39;)?
            this.$backdrop.one($.support.transition.end, callback) :
            callback()

        } else if (callback) {
          callback()
        }
      }
  }


 /* MODAL PLUGIN DEFINITION
  * ======================= */

  var old = $.fn.modal

  $.fn.modal = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data(&#39;modal&#39;)
        , options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == &#39;object&#39; &amp;&amp; option)
      if (!data) $this.data(&#39;modal&#39;, (data = new Modal(this, options)))
      if (typeof option == &#39;string&#39;) data[option]()
      else if (options.show) data.show()
    })
  }

  $.fn.modal.defaults = {
      backdrop: true
    , keyboard: true
    , show: true
  }

  $.fn.modal.Constructor = Modal


 /* MODAL NO CONFLICT
  * ================= */

  $.fn.modal.noConflict = function () {
    $.fn.modal = old
    return this
  }


 /* MODAL DATA-API
  * ============== */

  $(document).on(&#39;click.modal.data-api&#39;, &#39;[data-toggle=&quot;modal&quot;]&#39;, function (e) {
    var $this = $(this)
      , href = $this.attr(&#39;href&#39;)
      , $target = $($this.attr(&#39;data-target&#39;) || (href &amp;&amp; href.replace(/.*(?=#[^\s]+$)/, &#39;&#39;))) //strip for ie7
      , option = $target.data(&#39;modal&#39;) ? &#39;toggle&#39; : $.extend({ remote:!/#/.test(href) &amp;&amp; href }, $target.data(), $this.data())

    e.preventDefault()

    $target
      .modal(option)
      .one(&#39;hide&#39;, function () {
        $this.focus()
      })
  })

}(window.jQuery);
</pre>
</body>
</html>
