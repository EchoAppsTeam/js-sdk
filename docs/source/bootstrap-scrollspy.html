<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* =============================================================
 * bootstrap-scrollspy.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */


!function ($) {

  &quot;use strict&quot;; // jshint ;_;


 /* SCROLLSPY CLASS DEFINITION
  * ========================== */

  function ScrollSpy(element, options) {
    var process = $.proxy(this.process, this)
      , $element = $(element).is(&#39;body&#39;) ? $(window) : $(element)
      , href
    this.options = $.extend({}, $.fn.scrollspy.defaults, options)
    this.$scrollElement = $element.on(&#39;scroll.scroll-spy.data-api&#39;, process)
    this.selector = (this.options.target
      || ((href = $(element).attr(&#39;href&#39;)) &amp;&amp; href.replace(/.*(?=#[^\s]+$)/, &#39;&#39;)) //strip for ie7
      || &#39;&#39;) + &#39; .nav li &gt; a&#39;
    this.$body = $(&#39;body&#39;)
    this.refresh()
    this.process()
  }

  ScrollSpy.prototype = {

      constructor: ScrollSpy

    , refresh: function () {
        var self = this
          , $targets

        this.offsets = $([])
        this.targets = $([])

        $targets = this.$body
          .find(this.selector)
          .map(function () {
            var $el = $(this)
              , href = $el.data(&#39;target&#39;) || $el.attr(&#39;href&#39;)
              , $href = /^#\w/.test(href) &amp;&amp; $(href)
            return ( $href
              &amp;&amp; $href.length
              &amp;&amp; [[ $href.position().top + (!$.isWindow(self.$scrollElement.get(0)) &amp;&amp; self.$scrollElement.scrollTop()), href ]] ) || null
          })
          .sort(function (a, b) { return a[0] - b[0] })
          .each(function () {
            self.offsets.push(this[0])
            self.targets.push(this[1])
          })
      }

    , process: function () {
        var scrollTop = this.$scrollElement.scrollTop() + this.options.offset
          , scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight
          , maxScroll = scrollHeight - this.$scrollElement.height()
          , offsets = this.offsets
          , targets = this.targets
          , activeTarget = this.activeTarget
          , i

        if (scrollTop &gt;= maxScroll) {
          return activeTarget != (i = targets.last()[0])
            &amp;&amp; this.activate ( i )
        }

        for (i = offsets.length; i--;) {
          activeTarget != targets[i]
            &amp;&amp; scrollTop &gt;= offsets[i]
            &amp;&amp; (!offsets[i + 1] || scrollTop &lt;= offsets[i + 1])
            &amp;&amp; this.activate( targets[i] )
        }
      }

    , activate: function (target) {
        var active
          , selector

        this.activeTarget = target

        $(this.selector)
          .parent(&#39;.active&#39;)
          .removeClass(&#39;active&#39;)

        selector = this.selector
          + &#39;[data-target=&quot;&#39; + target + &#39;&quot;],&#39;
          + this.selector + &#39;[href=&quot;&#39; + target + &#39;&quot;]&#39;

        active = $(selector)
          .parent(&#39;li&#39;)
          .addClass(&#39;active&#39;)

        if (active.parent(&#39;.dropdown-menu&#39;).length)  {
          active = active.closest(&#39;li.dropdown&#39;).addClass(&#39;active&#39;)
        }

        active.trigger(&#39;activate&#39;)
      }

  }


 /* SCROLLSPY PLUGIN DEFINITION
  * =========================== */

  var old = $.fn.scrollspy

  $.fn.scrollspy = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data(&#39;scrollspy&#39;)
        , options = typeof option == &#39;object&#39; &amp;&amp; option
      if (!data) $this.data(&#39;scrollspy&#39;, (data = new ScrollSpy(this, options)))
      if (typeof option == &#39;string&#39;) data[option]()
    })
  }

  $.fn.scrollspy.Constructor = ScrollSpy

  $.fn.scrollspy.defaults = {
    offset: 10
  }


 /* SCROLLSPY NO CONFLICT
  * ===================== */

  $.fn.scrollspy.noConflict = function () {
    $.fn.scrollspy = old
    return this
  }


 /* SCROLLSPY DATA-API
  * ================== */

  $(window).on(&#39;load&#39;, function () {
    $(&#39;[data-spy=&quot;scroll&quot;]&#39;).each(function () {
      var $spy = $(this)
      $spy.scrollspy($spy.data())
    })
  })

}(window.jQuery);</pre>
</body>
</html>
