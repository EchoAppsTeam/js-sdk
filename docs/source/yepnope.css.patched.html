<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">( function ( window, doc, undef ) {
  // Takes a preloaded css obj (changes in different browsers) and injects it into the head
  yepnope.injectCss = function( href, cb, attrs, timeout, /* Internal use */ err, internal ) {

    // Create stylesheet link
    var link = document.createElement( &quot;link&quot; ),
        onload = function() {
          if ( ! done ) {
            done = 1;
            link.removeAttribute(&quot;id&quot;);
            setTimeout( cb, 0 );
          }
        },
        id = &quot;yn&quot; + (+new Date()),
        ref, done, i;

    cb = internal ? yepnope.executeStack : ( cb || function(){} );
    timeout = timeout || yepnope.errorTimeout;
    // Add attributes
    link.href = href;
    link.rel  = &quot;stylesheet&quot;;
    link.type = &quot;text/css&quot;;
    link.id = id;

    // Add our extra attributes to the link element
    for ( i in attrs ) {
      link.setAttribute( i, attrs[ i ] );
    }

    var isWebkit = ( &#39;webkitAppearance&#39; in doc.documentElement.style );
    if ( ! err ) {
      setTimeout(onload, timeout);
      ref = document.getElementsByTagName(&#39;base&#39;)[0] || document.getElementsByTagName(&#39;script&#39;)[0];
      ref.parentNode.insertBefore( link, ref );
      link.onload = onload;

      function poll() {
        try {
            if (done) return;
            var sheets = document.styleSheets;
            for(var j=0, k=sheets.length; j&lt;k; j++) {
                if(sheets[j].ownerNode.id == id) {
                    // this throws an exception, I believe, if not full loaded (was originally just &quot;sheets[j].cssRules;&quot;)
                    if (isWebkit || sheets[j].cssRules.length)
                        return onload();
                }
            }
            // if we get here, its not in document.styleSheets (we never saw the ID)
            throw new Error;
        } catch(e) {
            // Keep polling
            setTimeout(poll, 20);
        }
      }
      poll();
    }
  }
})( this, this.document );
</pre>
</body>
</html>
