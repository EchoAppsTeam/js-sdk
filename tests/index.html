<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Echo SDK v3 tests</title>
	<style>
		body { margin: 0px; padding: 0px; }
		#container { padding: 10px; width: 80%; background: #FFFFFF; border: 1px solid #FFFFFF; box-shadow: 0 4px 15px #666666; margin: 10px auto 0px auto; }
		#echo-tests { background: #FFFFFF; }
		#qunit-header, #qunit-tests > li:last-child { border-radius:0; }
	</style>
	<link href="{%=baseURLs.sdk%}/gui.pack.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="{%=baseURLs.sdk%}/loader.js"></script>
	<script type="text/javascript">
		//TODO: this is a temporal decision just to run tests. It must be rewrote asap
		Echo.require([
			"jquery",
			"echo/api",
			"echo/app",
			"echo/events",
			"echo/user-session",
			"echo/utils",
			"QUnit",
			"echo/backplane",
			"require"
		], function($, API, App, Events, UserSession, Utils, QUnit) {
			Echo.Utils = Utils;
			Echo.App = App;
			Echo.Plugin = Plugin;
			Echo.Events = Events;
			Echo.jQuery = $;
			Echo.API = API;
			Echo.UserSession = UserSession;
			Echo.require(["echo/tests/harness", "echo/tests/harness/suite"], function() {
				Echo.Tests.Fixtures = {
					"api": {},
					"loader": {},
					"canvases": {}
				};
				Echo.require([
					"config",
					"helpers/events.js",
					"fixtures/api/count.js",
					"fixtures/api/search.js",
					"fixtures/api/whoami.js"
				], function() {
					Echo.require([
						"unit/api",
						"unit/app",
						"unit/button",
						"unit/compatibility",
						"unit/configuration",
						"unit/utils",
						"unit/modal",
						"unit/dropdown",
						"unit/tabs",
						"unit/button",
						"unit/gui",
						"unit/cookie",
						"unit/events",
						"unit/labels",
						"unit/button",
						"unit/user-session",
						"unit/streamserver/api",
						"unit/plugin",
						"unit/view",
						"unit/loader",
						"unit/streamserver/apps/counter",
						"unit/streamserver/apps/media-gallery",
						"unit/streamserver/apps/submit",
						"unit/streamserver/apps/facepile",
						"unit/streamserver/apps/facepile-item",
						"unit/streamserver/apps/stream",
						"unit/streamserver/apps/stream-item",
						"unit/streamserver/apps/media-gallery",
						"unit/streamserver/plugins/edit",
						"unit/streamserver/plugins/reply",
						"unit/streamserver/plugins/item-accumulator-display",
						"unit/streamserver/plugins/pinboard-visualization",
						"unit/streamserver/plugins/form-auth",
						"unit/streamserver/plugins/text-counter",
						"unit/streamserver/plugins/community-flag",
						"unit/streamserver/plugins/moderation",
						"unit/streamserver/plugins/tweet-display",
						"unit/streamserver/plugins/infinite-scroll"
					], function() {
						Echo.Tests.init({
							"title": "Echo SDK v3 tests",
							"backplane": {
								"serverBaseURL": "https:{%=baseURLs.api.backplane%}/v1",
								"busName": "jskit"
							}
						});
					});
				});
			});
		});
	</script>
</head>
<body>
	<div id="container">
		<div id="echo-tests">
			<h1 id="qunit-header"></h1>
			<h2 id="qunit-banner"></h2>
			<div id="qunit-testrunner-toolbar"></div>
			<h2 id="qunit-userAgent"></h2>
			<ol id="qunit-tests"></ol>
			<div id="qunit-fixture"></div>
		</div>
	</div>
</body>
</html>
